var DataBinder=function(){function d(a){switch(a){case"checkbox":return"click";case"radio":return"click";default:return"keyup"}}function e(a,c,d){if("object"!=typeof d)b[a].getAttribute("data-binder")==c&&("radio"!=b[a].type&&(b[a].value=d),"radio"==b[a].type&&(b[a].checked=b[a].value==d),"checkbox"==b[a].type&&(b[a].checked=d));else for(var f in d)e(a,c+"."+f,d[f])}function f(){for(var b=document.querySelectorAll("[data-visible]"),c=0;c<b.length;c++){var d=b[c].getAttribute("data-visible"),e=!0,f=d.indexOf("==");-1==f&&(f=d.indexOf("!="),e=!1);var g=d.slice(0,f),h=d.slice(f+2);e?a[g]==h?b[c].style.display="inherit":b[c].style.display="none":a[g]!=h?b[c].style.display="inherit":b[c].style.display="none"}}function g(a,b){var c=!1;return a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))&&(c=!0),c}function h(){for(var b=document.querySelectorAll("[data-class]"),c=0;c<b.length;c++)for(var d=b[c].getAttribute("data-class").split(","),e=0;e<d.length;e++){var f=d[e].indexOf(":"),h=d[e].indexOf("=="),i=d[e].slice(0,f),j=d[e].slice(f+1,h),k=d[e].slice(h+2);if(a[j]+""==k)g(b[c],i)||(b[c].className+=" "+i);else if(g(b[c],i)){var l=new RegExp("(\\s|^)"+i+"(\\s|$)");b[c].className=b[c].className.replace(l,"")}}}function i(){for(var b=0;b<c.length;b++){for(var d=c[b].getAttribute("data-repeat"),e="",f=_.get(a,d),g=0;g<f.length;g++)if("object"==typeof f[g]){var h="";_.map(f[g],function(a,b){h+='<span class="span_1">'+b+': </span><span class="span_2">'+a+"</span>"}),e+="<li>"+h+'<em class="remove_item" data-item="'+d+'" data-index="'+g+'" >X</em></li>'}else e+="<li>"+value+'<em class="remove_item" data-item="'+d+'" data-index="'+g+'" >X</em></li>';""==e?c[b].style.display="none":(c[b].style.display="inherit",c[b].innerHTML=e)}j()}function j(){for(var a=document.querySelectorAll(".remove_item"),b=0;b<a.length;b++)a[b].addEventListener("click",function(){var a=this.getAttribute("data-item"),b=this.getAttribute("data-index");k.removeItem(a,b)})}var a={},b=document.querySelectorAll("[data-binder]"),c=document.querySelectorAll("[data-repeat]");!function(){for(var a=0;a<b.length;a++){var c=b[a].getAttribute("type");b[a].addEventListener(d(c),function(){var a=this.getAttribute("data-binder"),b=this.value;"checkbox"==this.getAttribute("type")&&(b=this.checked),k.set(a,b)})}}();var k={get:function(){return a},set:function(c,d){var g=c;if(d||""==d){_.set(a,c,d);for(var j=0;j<b.length;j++)e(j,c,d)}else{for(var j in c)_.set(a,j,c[j]);for(var j=0;j<b.length;j++)for(var k in g)e(j,k,g[k])}this.debug&&console.log(a),f(),h(),i()},pushArray:function(b,c){var d=_.get(a,b);d.push(c),_.set(a,b,d),i(),this.debug&&console.log(a)},removeItem:function(b,c){var d=_.get(a,b);d.splice(c,1),_.set(a,b,d),i(),this.debug&&console.log(a)},debug:!1};return k};